import tweepy
import time

# Set your Twitter API credentials
consumer_key = "YOUR_CONSUMER_KEY"
consumer_secret = "YOUR_CONSUMER_SECRET"
access_token = "YOUR_ACCESS_TOKEN"
access_token_secret = "YOUR_ACCESS_TOKEN_SECRET"

# Set the maximum number of accounts to unfollow in one run
max_unfollow_count = 10

# Authenticate with Twitter
auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)
api = tweepy.API(auth)

# Get the list of accounts that have unfollowed you
def get_unfollowers():
    followers = set(api.followers_ids(screen_name="YOUR_TWITTER_USERNAME"))
    following = set(api.friends_ids(screen_name="YOUR_TWITTER_USERNAME"))
    unfollowed_accounts = following - followers
    return list(unfollowed_accounts)

# Unfollow accounts with a limit
def unfollow_accounts(unfollow_list, max_count):
    count = 0
    for user_id in unfollow_list[:max_count]:
        try:
            api.destroy_friendship(user_id=user_id)
            print(f"Unfollowed user with ID {user_id}")
            count += 1
        except tweepy.TweepError as e:
            print(f"Error unfollowing user with ID {user_id}: {str(e)}")
        time.sleep(1)  # To avoid hitting rate limits

    return count

if __name__ == "__main__":
    unfollow_list = get_unfollowers()
    total_unfollowed = unfollow_accounts(unfollow_list, max_unfollow_count)
    print(f"Unfollowed {total_unfollowed} accounts.")
